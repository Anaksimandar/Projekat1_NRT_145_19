<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>Document</title>
    <style>

        input, label{
            font-size:0.75em !important; 
        }

       @media (max-width: 940px) {
        .main .row {
            flex-direction: column; /* Stack columns vertically */
        }
        #filter-container{
            width: 50%; /* Full width for each column */
        }
        #list-posts-container{
            width: 50%;
        }
        
}
        
    </style>
</head>
<body>
    <div class="container">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <div class="navbar-nav">
                        <a class="nav-link" aria-current="page" href="/">Pocetna</a>
                    </div>
                </div>
            </div>
        </nav>
        <a href="/oglas/new" class="btn btn-success my-4">Kreiraj oglas</a>
        <h2>Filtriraj</h2>
        <div class="main">
            <div class="row">
                <div  id="filter-container"  class="col-3">
                    <!-- Filtering form -->
                    <div class="row me-4">
                        <div class="col">
                            <form  action="/filtriraj" method="get">
                                <div class="input-group">
                                    <input name="kategorija" class="form-control" type="text" placeholder="Unesite kategoriju:">
                                </div>
                                <div class="form-group">
                                    <label for="donjaGranicaDatum">Donja granica</label>
                                    <input id="donjaGranicaDatum" name="donjaGranicaDatum" class="form-control" type="date">
                                </div>
                                <div class="form-group">
                                    <label for="gornjaGranicaDatum">Gornja granica</label>
                                    <input name="gornjaGranicaDatum" class="form-control" type="date">
                                </div>
                                <div class="form-group">
                                    <input name="donjaGranicaCene" min="0" max="99999" class="form-control my-2" type="number"
                                        placeholder="Unesite donju granicu cene:">
                                    <input name="gornjaGranicaCene" min="0" max="99999" class="form-control my-2" type="number"
                                        placeholder="Unesite gornju granicu cene:">
                                </div>
                                <div>
                                    <button id="filterButton" class="btn btn-info mb-4">Pretrazi</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <% if (data.length == 0) { %>
                    <div id="list-posts-container" class="col-9">
                        <p class="alert alert-info">There is not posts.</p>
                    </div>
                <% } else { %>
                    <div id="list-posts-container" class="col-9">
                        <!-- Listing posts-->
                        <div class="row">
                            <div class="col">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th scope="col">Kategorija</th>
                                            <th scope="col">Cena</th>
                                            <th scope="col">Opis</th>
                                            <th scope="col">Datum isteka</th>
                                            <th scope="col">Tagovi</th>
                                            <th scope="col">Mejlovi</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <% for(let i=0; i<data.length;i++){%>
                                            <tr id="prikazRedova">
                                                <td>
                                                    <%=data[i].kategorija%>
                                                </td>
                                                <td>
                                                    <%=data[i].cena.vrednost%>
                                                        <%=data[i].cena.valuta%>
                                                </td>
                                                <td>
                                                    <%=data[i].opis%>
                                                </td>
                                                <td>
                                                    <%=data[i].datum%>
                                                </td>
                                                <td>
                                                    <% for(let j=0;j < data[i].tags.length;j++){%>
                                                        <small>
                                                            <%=data[i].tags[j]%>,
                                                        </small>
                                                        <%} %>
                                                </td>
                                                <td>
                                                    <% for(let j=0;j < data[i].mails.length;j++){%>
                                                        <small>
                                                            <%=data[i].mails[j].mail%>,
                                                        </small>
                                                        <%} %>
                                                </td>
                                                <td><a href="/oglas/edit/<%= data[i].id %>" class="btn btn-info">Izmeni</a></td>
                                                <td><a href="/oglas/delete/<%= data[i].id %>" class="btn btn-danger">Obrisi</a></td>
                                            </tr>
                                            <%}%>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                 <% } %>


                
            </div>
        </div>
        

    </div>
   
   
</body>
</html>
